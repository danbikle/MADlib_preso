~/mlp/results_discussion.txt

This model lacks the ability to predict down days.

This is somewhat expected because the model was built after
I noticed Mean Reversion behavior and used that analysis
to design my training vectors.

Mean Reversion works better at predicting up days than at predicting down days.

Additionally, the out of sample data were the days between
2013-01-02 and 2014-01-31 which had a total gain of
(178-145)/145 which is a healthy 23%.

Predicting down days in 2013 was difficult because much of the time
the market was going up.

Also, the vector length I'm using in this model is only 2.

And, the only 'pure' information used in my vector design is price.

I ignore other sources of information like volume, sentiment,
calendar events, interest rates, energy prices, currency behavior, and media events.

The good news is that I see a positive correlation between prediction
confidence levels and corresponding gains.

For example when confidence is above 0.51,
I see an average 1 day gain of 0.065%.

when confidence is above 0.54,
I see an average 1 day gain of 0.094%
which is 44% higher.

The results from the reporting script I wrote are listed below:



dan@madlibsvm ~/mlp $
dan@madlibsvm ~/mlp $
dan@madlibsvm ~/mlp $
dan@madlibsvm ~/mlp $ ./psqlmad.bash -f predict_oosd.sql 
--
-- ~/mlp/predict_oosd.sql
--
-- I use this script to predict outcomes of
-- Out of sample observations with known outcomes.
-- Then I report on the accuracy of the predictions.
DROP TABLE oosd_predictions;
DROP TABLE
CREATE TABLE oosd_predictions AS
SELECT
ydate
,madlib.logistic(madlib.array_dot(my_out_table.coef,
  array[1,prev_1st_n1dg, prev_2nd_n1dg]::float8[])) AS probability
,ROUND(n1dg,7) n1dg
FROM oos_vectors, my_out_table
ORDER BY ydate
;
SELECT 274
SELECT * FROM oosd_predictions;
   ydate    |    probability    |    n1dg    
------------+-------------------+------------
 2013-01-02 | 0.473965378854513 | -0.0022593
 2013-01-03 | 0.511528048926806 |  0.0043917
 2013-01-04 | 0.522691985604838 | -0.0027328
 2013-01-07 | 0.528811315285762 | -0.0028773
 2013-01-08 | 0.534572973092801 |  0.0025421
 2013-01-09 | 0.526104963649057 |  0.0079496
 2013-01-10 | 0.513306538690787 | -0.0000680
 2013-01-11 | 0.521820369134225 | -0.0006799
 2013-01-14 | 0.529025754943047 |  0.0006804
 2013-01-15 | 0.527346478044681 | -0.0001360
 2013-01-16 | 0.527582400125399 |  0.0064604
 2013-01-17 | 0.517756953411958 |  0.0022297
 2013-01-18 | 0.519334369013105 |  0.0053934
 2013-01-22 | 0.517608095950217 |  0.0016093
 2013-01-23 | 0.521149287035604 |  0.0002678
 2013-01-24 | 0.526220359391876 |  0.0056221
 2013-01-25 | 0.518772884992886 | -0.0011980
 2013-01-28 | 0.525422880089976 |  0.0039315
 2013-01-29 | 0.522595899574227 | -0.0039161
 2013-01-30 | 0.531042556895362 | -0.0024655
 2013-01-31 | 0.534839972418736 |  0.0102872
 2013-02-01 | 0.513496174479704 | -0.0112404
 2013-02-04 | 0.537694364034518 |  0.0100976
 2013-02-05 | 0.520631288003025 |  0.0007282
 2013-02-06 |  0.51888496934623 | -0.0013231
 2013-02-07 | 0.529425588736225 |  0.0055644
 2013-02-08 | 0.520103106520934 | -0.0001976
 2013-02-11 | 0.523881908126531 |  0.0016472
 2013-02-12 |  0.52543930553393 |  0.0008552
 2013-02-13 | 0.525259964203521 |  0.0009201
 2013-02-14 | 0.525772964554255 | -0.0011820
 2013-02-15 | 0.529052925078922 |  0.0074946
 2013-02-19 | 0.516930068166332 | -0.0124633
 2013-02-20 | 0.541789228126068 | -0.0060790
 2013-02-21 | 0.547162975108494 |  0.0097726
 2013-02-22 | 0.517128171280695 | -0.0190269
 2013-02-25 | 0.550369743418906 |  0.0068456
 2013-02-26 | 0.531839305879802 |  0.0125983
 2013-02-27 | 0.502566405158174 | -0.0019749
 2013-02-28 | 0.521226874741015 |  0.0032979
 2013-03-01 | 0.524204939671229 |  0.0053251
 2013-03-04 | 0.516884538951103 |  0.0089589
 2013-03-05 | 0.509534430578432 |  0.0013611
 2013-03-06 | 0.518767369148242 |  0.0018123
 2013-03-07 | 0.523965195659304 |  0.0042641
 2013-03-08 | 0.519725192844648 |  0.0037957
 2013-03-11 |  0.51855951326689 | -0.0022432
 2013-03-12 |  0.52849896964982 |  0.0014132
 2013-03-13 | 0.527400794023785 |  0.0053239
 2013-03-14 | 0.518354227442104 | -0.0057424
 2013-03-15 | 0.532851578143945 | -0.0055188
 2013-03-18 | 0.541079905127102 | -0.0023230
 2013-03-19 | 0.535858159866181 |  0.0069853
 2013-03-20 |  0.51862695851379 | -0.0085426
 2013-03-21 | 0.535991156902521 |  0.0080332
 2013-03-22 | 0.521806287340647 | -0.0041774
 2013-03-25 | 0.528269274592832 |  0.0080026
 2013-03-26 | 0.518456545130315 |  0.0000000
 2013-03-27 |   0.5216712629565 |  0.0030732
 2013-03-28 | 0.523024851915299 | -0.0039574
 2013-04-01 | 0.531774500686668 |  0.0049343
 2013-04-02 | 0.523152725199257 | -0.0101390
 2013-04-03 | 0.540103359205447 |  0.0040585
 2013-04-04 | 0.529347482841909 | -0.0044912
 2013-04-05 | 0.531854237196497 |  0.0067672
 2013-04-08 | 0.520661060949811 |  0.0034569
 2013-04-09 |  0.51714791589538 |  0.0122488
 2013-04-10 |  0.50576398986282 |  0.0032772
 2013-04-11 | 0.513162796803369 | -0.0024499
 2013-04-12 |  0.52922932425139 | -0.0231738
 2013-04-15 |   0.5662695249243 |  0.0147628
 2013-04-16 | 0.522519277606582 | -0.0146115
 2013-04-17 | 0.539550605751976 | -0.0062536
 2013-04-18 | 0.549097428294531 |  0.0086934
 2013-04-19 | 0.518976969676485 |  0.0044379
 2013-04-22 | 0.514090037753495 |  0.0103093
 2013-04-23 | 0.508080802991258 |  0.0006338
 2013-04-24 | 0.518870041284364 |  0.0040537
 2013-04-25 | 0.520976420404342 | -0.0017663
 2013-04-26 | 0.527543043149698 |  0.0066987
 2013-04-29 | 0.518648347725283 |  0.0023854
 2013-04-30 | 0.518901749062514 | -0.0087675
 2013-05-01 | 0.539912605271256 |  0.0092873
 2013-05-02 | 0.519991788713399 |  0.0101408
 2013-05-03 | 0.504567662809156 |  0.0025407
 2013-05-06 |  0.51597448500541 |  0.0050686
 2013-05-07 |  0.51788133991878 |  0.0045510
 2013-05-08 | 0.516734095766128 | -0.0028162
 2013-05-09 | 0.528819577120333 |  0.0032539
 2013-05-10 | 0.524929169483032 |  0.0007955
 2013-05-13 |  0.52410468198673 |  0.0103339
 2013-05-14 | 0.510880828458103 |  0.0053864
 2013-05-15 | 0.511305283970651 | -0.0046954
 2013-05-16 | 0.531146086712437 |  0.0096770
 2013-05-17 |  0.51620225035746 | -0.0000599
 2013-05-20 | 0.520462951655478 |  0.0014377
 2013-05-21 | 0.525664251200194 | -0.0074176
 2013-05-22 | 0.538514989243441 | -0.0028928
 2013-05-23 | 0.538231046972284 | -0.0008462
 2013-05-24 | 0.531483518854545 |  0.0059887
 2013-05-28 | 0.519058458884481 | -0.0064943
 2013-05-29 | 0.533525122756807 |  0.0036920
 2013-05-30 |  0.52709504165432 | -0.0143520
 2013-05-31 | 0.547707894123084 |  0.0055063
 2013-06-03 | 0.530328370496691 | -0.0048068
 2013-06-04 |  0.53122936861617 | -0.0140010
 2013-06-05 | 0.553714490441179 |  0.0090531
 2013-06-06 | 0.524435930588143 |  0.0127205
 2013-06-07 |  0.50065102981155 |  0.0000000
 2013-06-10 | 0.517998297338416 | -0.0103155
 2013-06-11 | 0.544202054228524 | -0.0082771
 2013-06-12 | 0.548964553278105 |  0.0152087
 2013-06-13 | 0.510208813020421 | -0.0062725
 2013-06-14 | 0.526010238256826 |  0.0077215
 2013-06-17 | 0.520533644499479 |  0.0079056
 2013-06-18 | 0.509339738801473 | -0.0138168
 2013-06-19 | 0.543606315138708 | -0.0247782
 2013-06-20 | 0.577446305064708 | -0.0020703
 2013-06-21 | 0.550364299700852 | -0.0126359
 2013-06-24 | 0.549457258121012 |  0.0096142
 2013-06-25 |  0.52248431228186 |  0.0099010
 2013-06-26 | 0.504693976700608 |  0.0058699
 2013-06-27 | 0.510874784894166 | -0.0040973
 2013-06-28 | 0.529823663660836 |  0.0058596
 2013-07-01 | 0.521794186650399 | -0.0009296
 2013-07-02 | 0.524812694965048 |  0.0004342
 2013-07-03 | 0.527930591759612 |  0.0107887
 2013-07-05 | 0.510439989542025 |  0.0057048
 2013-07-08 | 0.510445070645899 |  0.0071973
 2013-07-09 | 0.512036630110432 |  0.0003634
 2013-07-10 | 0.521721659030901 |  0.0136207
 2013-07-11 | 0.505996038658524 |  0.0004181
 2013-07-12 | 0.516633629259558 |  0.0038207
 2013-07-15 | 0.521514007693332 | -0.0037467
 2013-07-16 | 0.530860401541972 |  0.0025669
 2013-07-17 | 0.526741685893614 |  0.0054778
 2013-07-18 | 0.517211512102491 |  0.0017765
 2013-07-19 | 0.520818354112804 |  0.0019507
 2013-07-22 | 0.523422534162612 | -0.0021239
 2013-07-23 | 0.529743826529588 | -0.0036656
 2013-07-24 | 0.535347094620905 |  0.0024329
 2013-07-25 | 0.526890860458739 |  0.0010655
 2013-07-26 |  0.52431530498028 | -0.0030749
 2013-07-29 | 0.531936980798035 |  0.0000000
 2013-07-30 | 0.530285431045681 |  0.0007118
 2013-07-31 | 0.526768126446334 |  0.0115583
 2013-08-01 | 0.509001085924298 |  0.0016993
 2013-08-02 | 0.516206186654248 | -0.0014624
 2013-08-05 | 0.528891624473934 | -0.0056825
 2013-08-06 | 0.538021938692609 | -0.0032404
 2013-08-07 |  0.53743514477376 |  0.0036647
 2013-08-08 | 0.524607922248607 | -0.0028857
 2013-08-09 | 0.529618444259629 | -0.0011813
 2013-08-12 | 0.532008409540244 |  0.0029567
 2013-08-13 | 0.524128659708029 | -0.0051294
 2013-08-14 |  0.53371953909636 | -0.0139860
 2013-08-15 | 0.553939618139769 | -0.0033057
 2013-08-16 | 0.543969830533519 | -0.0063921
 2013-08-19 | 0.540571046216897 |  0.0049159
 2013-08-20 | 0.525075916954118 | -0.0061602
 2013-08-21 | 0.533829288097752 |  0.0091152
 2013-08-22 |  0.51823478762349 |  0.0033723
 2013-08-23 |  0.51545331447628 | -0.0037210
 2013-08-26 | 0.531168145012739 | -0.0160843
 2013-08-27 | 0.556148868716078 |  0.0035511
 2013-08-28 | 0.534767267434195 |  0.0015862
 2013-08-29 | 0.522619695541526 | -0.0031674
 2013-08-30 | 0.531679045674965 |  0.0045218
 2013-09-03 | 0.523192178553923 |  0.0082730
 2013-09-04 | 0.511250053044472 |  0.0012670
 2013-09-05 | 0.519450765758087 |  0.0004820
 2013-09-06 | 0.526147043196807 |  0.0095760
 2013-09-09 | 0.512328844964438 |  0.0073972
 2013-09-10 | 0.508701801034216 |  0.0031385
 2013-09-11 | 0.517162572602121 | -0.0026564
 2013-09-12 | 0.529664196973562 |  0.0022492
 2013-09-13 | 0.526397385731368 |  0.0057875
 2013-09-16 | 0.516967352948536 |  0.0044625
 2013-09-17 | 0.516314777588506 |  0.0115742
 2013-09-18 | 0.506051885965668 | -0.0016758
 2013-09-19 |  0.52154962176905 | -0.0118083
 2013-09-20 | 0.547849787533379 | -0.0046275
 2013-09-23 | 0.544369095863199 | -0.0023539
 2013-09-24 | 0.535215445415003 | -0.0028903
 2013-09-25 | 0.534299559066088 |  0.0038452
 2013-09-26 | 0.524049405996002 | -0.0045966
 2013-09-27 | 0.532186657789665 | -0.0053283
 2013-09-30 | 0.539891537495295 |  0.0079162
 2013-10-01 | 0.519489753598616 | -0.0009448
 2013-10-02 | 0.523236951955893 | -0.0092209
 2013-10-03 | 0.543207004842646 |  0.0075767
 2013-10-04 | 0.523058148518154 | -0.0086447
 2013-10-07 | 0.535693784972524 | -0.0116467
 2013-10-08 | 0.552974240993376 |  0.0007252
 2013-10-09 | 0.535792659120065 |  0.0215580
 2013-10-10 | 0.493101136907423 |  0.0064432
 2013-10-11 | 0.500875798831821 |  0.0039939
 2013-10-14 | 0.516547844869108 | -0.0072540
 2013-10-15 | 0.536274452702061 |  0.0139658
 2013-10-16 | 0.511385522924527 |  0.0066833
 2013-10-17 | 0.506413879157479 |  0.0067544
 2013-10-18 | 0.511977505175834 |  0.0000573
 2013-10-21 | 0.522551670516578 |  0.0057913
 2013-10-22 | 0.518668292750248 | -0.0047888
 2013-10-23 | 0.530979441056815 |  0.0033224
 2013-10-24 | 0.526354635105007 |  0.0045675
 2013-10-25 | 0.518067880373673 |  0.0015914
 2013-10-28 | 0.521820577227544 |  0.0053339
 2013-10-29 | 0.518199565838374 | -0.0049670
 2013-10-30 | 0.531616736191793 | -0.0028362
 2013-10-31 | 0.536241405914435 |  0.0023892
 2013-11-01 | 0.526315289710172 |  0.0035185
 2013-11-04 | 0.520459000771267 | -0.0031669
 2013-11-05 | 0.530177209033809 |  0.0051058
 2013-11-06 | 0.522265662960675 | -0.0126432
 2013-11-07 | 0.543922022644539 |  0.0134911
 2013-11-08 | 0.516338308111036 |  0.0001692
 2013-11-11 | 0.517129546591029 | -0.0020302
 2013-11-12 | 0.530979520699093 |  0.0080244
 2013-11-13 | 0.516749728837905 |  0.0049893
 2013-11-14 | 0.513735573911778 |  0.0043510
 2013-11-15 | 0.517113400861236 | -0.0034990
 2013-11-18 | 0.530056370541024 | -0.0021737
 2013-11-19 | 0.534054718624593 | -0.0031280
 2013-11-20 | 0.534535511545424 |  0.0080686
 2013-11-21 | 0.517534575753524 |  0.0050025
 2013-11-22 | 0.513680271875081 | -0.0009955
 2013-11-25 | 0.525583829065453 |  0.0002768
 2013-11-26 | 0.528231186139619 |  0.0024352
 2013-11-27 | 0.523821029993799 | -0.0006625
 2013-11-29 | 0.527052423536778 | -0.0025967
 2013-12-02 | 0.532522021601885 | -0.0043206
 2013-12-03 | 0.536749330692049 | -0.0001113
 2013-12-04 | 0.531429203538457 | -0.0043955
 2013-12-05 | 0.534939651492486 |  0.0111769
 2013-12-06 | 0.513587156574762 |  0.0025423
 2013-12-09 | 0.515164943061484 | -0.0035832
 2013-12-10 | 0.531594664084922 | -0.0112310
 2013-12-11 | 0.548414400294249 | -0.0033013
 2013-12-12 | 0.541830415914947 | -0.0001123
 2013-12-13 | 0.530639021453245 |  0.0062321
 2013-12-16 | 0.518100797187401 | -0.0031804
 2013-12-17 | 0.528089965181757 |  0.0170725
 2013-12-18 | 0.503274139534703 | -0.0011558
 2013-12-19 | 0.516443297612693 |  0.0003857
 2013-12-20 | 0.528183242125123 |  0.0053426
 2013-12-23 | 0.519124651618769 |  0.0021914
 2013-12-24 | 0.520265392538244 |  0.0050839
 2013-12-26 | 0.518129090216655 | -0.0000544
 2013-12-27 | 0.524028594786211 | -0.0001632
 2013-12-30 | 0.528196648442939 |  0.0047329
 2013-12-31 | 0.520519334041236 | -0.0095836
 2014-01-02 | 0.539382415765843 | -0.0001640
 2014-01-03 | 0.535598022179333 | -0.0028979
 2014-01-06 | 0.532611604725109 |  0.0061417
 2014-01-07 | 0.520413133035585 |  0.0002180
 2014-01-08 | 0.522773662506458 |  0.0006539
 2014-01-09 | 0.526690379104925 |  0.0027227
 2014-01-10 | 0.523071822425968 | -0.0133051
 2014-01-13 |  0.54680808070246 |  0.0108977
 2014-01-14 | 0.520969245668761 |  0.0053901
 2014-01-15 | 0.510860030200327 | -0.0012997
 2014-01-16 | 0.525764482594257 | -0.0042295
 2014-01-17 |   0.5355992184633 |  0.0029405
 2014-01-21 | 0.526524954871948 |  0.0006515
 2014-01-22 | 0.524576779687927 | -0.0081932
 2014-01-23 | 0.540349027186589 | -0.0213360
 2014-01-24 |  0.56779924178306 | -0.0049192
 2014-01-27 | 0.552188213070479 |  0.0059547
 2014-01-28 | 0.522282965748878 | -0.0096052
 2014-01-29 | 0.538469513359708 |  0.0106005
 2014-01-30 | 0.518560262859908 | -0.0058584
 2014-01-31 | 0.528936574989944 | -0.0225053
 2014-02-03 | 0.567836308575277 |           
(274 rows)

SELECT * FROM oosd_predictions
WHERE probability > 0.55
;
   ydate    |    probability    |    n1dg    
------------+-------------------+------------
 2013-02-25 | 0.550369743418906 |  0.0068456
 2013-04-15 |   0.5662695249243 |  0.0147628
 2013-06-05 | 0.553714490441179 |  0.0090531
 2013-06-20 | 0.577446305064708 | -0.0020703
 2013-06-21 | 0.550364299700852 | -0.0126359
 2013-08-15 | 0.553939618139769 | -0.0033057
 2013-08-27 | 0.556148868716078 |  0.0035511
 2013-10-08 | 0.552974240993376 |  0.0007252
 2014-01-24 |  0.56779924178306 | -0.0049192
 2014-01-27 | 0.552188213070479 |  0.0059547
 2014-02-03 | 0.567836308575277 |           
(11 rows)

SELECT COUNT(n1dg),ROUND(AVG(n1dg),5) avg_n1dg FROM oosd_predictions;
 count | avg_n1dg 
-------+----------
   273 |  0.00067
(1 row)

SELECT COUNT(n1dg),ROUND(AVG(n1dg),5) avg_n1dg FROM oosd_predictions WHERE probability > 0.51;
 count | avg_n1dg 
-------+----------
   256 |  0.00065
(1 row)

SELECT COUNT(n1dg),ROUND(AVG(n1dg),5) avg_n1dg FROM oosd_predictions WHERE probability > 0.52;
 count | avg_n1dg 
-------+----------
   185 |  0.00086
(1 row)

SELECT COUNT(n1dg),ROUND(AVG(n1dg),5) avg_n1dg FROM oosd_predictions WHERE probability > 0.53;
 count | avg_n1dg 
-------+----------
    87 |  0.00157
(1 row)

SELECT COUNT(n1dg),ROUND(AVG(n1dg),5) avg_n1dg FROM oosd_predictions WHERE probability > 0.54;
 count | avg_n1dg 
-------+----------
    30 |  0.00094
(1 row)

SELECT COUNT(n1dg),ROUND(AVG(n1dg),5) avg_n1dg FROM oosd_predictions WHERE probability > 0.55;
 count | avg_n1dg 
-------+----------
    10 |  0.00180
(1 row)

SELECT COUNT(n1dg),ROUND(AVG(n1dg),5) avg_n1dg FROM oosd_predictions WHERE probability > 0.56;
 count | avg_n1dg 
-------+----------
     3 |  0.00259
(1 row)

dan@madlibsvm ~/mlp $ 
dan@madlibsvm ~/mlp $ 
dan@madlibsvm ~/mlp $ 

